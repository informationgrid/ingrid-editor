<page-template-no-header label="UVP Bericht">
    <div left-side>
        <ige-facets
            [formControl]="facetForm"
            [facets]="facets"
            [forAddresses]="false"
            [forReports]="true"
        ></ige-facets>
    </div>
    <div main-content fxLayout="column" fxLayoutGap="36px">
        <div>
            Positive Vorprüfungen: {{ report?.positivePreliminaryAssessments }}
        </div>
        <div>
            Negative Vorprüfungen: {{ report?.negativePreliminaryAssessments }}
        </div>
        <div>Durchschnittliche Verfahrensdauer: {{ averageDuration }}</div>

        <ige-card-box fxFlex label="Verwendete UVP Nummern">
            <table
                mat-table
                [dataSource]="dataSource"
                matSort
                class="width-100"
            >
                <ng-container matColumnDef="eiaNumber">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        UVP Nummer
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.eiaNumber }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="eiaCategory">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        UVP-G Kategorie
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.eiaCategory }}
                    </td>
                </ng-container>
                <ng-container matColumnDef="count">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Anzahl
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.count }}
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumns"
                ></tr>
            </table>
        </ige-card-box>

        <button
            mat-raised-button
            color="primary"
            (click)="downloadReport()"
            [disabled]="!report"
        >
            Herunterladen
        </button>
    </div>
</page-template-no-header>
