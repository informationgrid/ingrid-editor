<div
    *transloco="let t; read: 'dashboard'"
    class="allPageScroll flex-1 flex-col"
>
    <div class="welcome" data-cy="welcome-message">
        <div class="greetings">{{ t("welcome") }}</div>
        <div *ngFor="let message of messages$ | async" class="message">
            <span>{{ message.text }}</span>
        </div>
    </div>

    <div class="dashboard-content">
        <ige-quick-search
            (selectDoc)="openDocument($event)"
            (selectAddress)="openAddress($event)"
        ></ige-quick-search>

        <div class="shortcut">
            <ige-action-button
                [label]="t('newDocument')"
                svgIcon="Neuer-Datensatz"
                [disabled]="!canCreateDataset"
                (submit)="createNewDocument()"
            ></ige-action-button>
            <ige-action-button
                label="Neuer Ordner"
                svgIcon="outline-create_new_folder-24px"
                [disabled]="!canCreateDataset"
                (submit)="createNewFolder()"
            ></ige-action-button>
            <ige-action-button
                *ngIf="canImport"
                [label]="t('importDocument')"
                icon="import_export"
                [disabled]="!canImport"
                (submit)="gotoImportPage()"
            ></ige-action-button>
            <ige-action-button
                label="Neue Adresse"
                svgIcon="outline-person_add-24px"
                [disabled]="!canCreateAddress"
                (submit)="createNewAddress()"
            ></ige-action-button>
        </div>

        <div class="info-cards flex-col gap-24">
            <div class="info-box flex-row gap-36">
                <ige-card-box label="{{ t('application') }} DatensÃ¤tze">
                    <ige-chart [data]="chartDataPublished()"></ige-chart>
                </ige-card-box>
            </div>

            <ige-card-box
                label="{{ t('mostRecent') }}"
                data-cy="card-latest-docs"
            >
                <ige-document-list-item
                    [docs]="recentDocs$"
                    [hideDate]="false"
                    (select)="openDocument($event._uuid)"
                ></ige-document-list-item>
            </ige-card-box>

            <ige-card-box
                data-cy="recent-published-docs"
                label="{{ t('mostRecentPublished') }}"
            >
                <ige-document-list-item
                    [docs]="recentPublishedDocs$"
                    [hideDate]="false"
                    (select)="openDocument($event._uuid)"
                ></ige-document-list-item>
            </ige-card-box>

            <ng-container
                *ngIf="oldestExpiredDocs$ | async as oldestExpiredDocs"
            >
                <ige-card-box
                    *ngIf="oldestExpiredDocs.length"
                    label="{{ t('oldestExpired') }}"
                >
                    <ige-document-list-item
                        [docs]="oldestExpiredDocs"
                        [hideDate]="false"
                        (select)="openDocument($event._uuid)"
                    ></ige-document-list-item>
                </ige-card-box>
            </ng-container>
        </div>
    </div>
</div>
