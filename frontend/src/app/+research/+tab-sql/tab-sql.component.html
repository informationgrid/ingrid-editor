<page-template label="SQL Suche">
    <div left-side>
        <p>
            Hier k√∂nnen Sie komplexe SQL Anfragen abschicken, wenn die
            erweiterte Suche nicht ausreicht.
        </p>
        <p>Hier sind ein paar Beispiele:</p>
        <mat-chip-set>
            <mat-chip
                *ngFor="let example of sqlExamples"
                (click)="updateSqlControl(example.value)"
                >{{ example.label }}</mat-chip
            >
        </mat-chip-set>
    </div>

    <div main-header fxFlex>
        <mat-form-field appearance="outline" class="width-100">
            <textarea
                matInput
                rows="4"
                placeholder="SELECT * FROM ..."
                data-cy="sql-query-field"
                [formControl]="sql"
            ></textarea>
        </mat-form-field>

        <div fxLayoutGap="12px">
            <div fxFlex></div>
            <button
                mat-stroked-button
                color="primary"
                [disabled]="sql.value === ''"
                (click)="updateSqlControl('')"
            >
                Entfernen
            </button>
            <button
                mat-flat-button
                color="primary"
                [disabled]="sql.value === ''"
                (click)="updateSqlControl(sql.value)"
            >
                Suchen
            </button>
        </div>

        <div class="save-search-button">
            <button mat-button color="primary" (click)="saveQuery()">
                Suche Speichern
            </button>
        </div>

        <div>
            <ng-content></ng-content>
        </div>
    </div>

    <div main-content fxFlex>
        <ige-result-table
            [result]="result"
            [isLoading]="isSearching"
            (updated)="search(sql.value)"
        ></ige-result-table>
    </div>
</page-template>
