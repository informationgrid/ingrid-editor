<page-template label="Katalogspezifische Codelisten">
    <ng-container left-side>
        <div>
            Sie haben hier die Möglichkeit bestehende Codelisten anzupassen.
            Diese Änderungen sind nur in diesem Katalog sichtbar. Wenn diese
            Änderungen auch in anderen Katalogen oder im Portal verwendet werden
            sollen, dann muss dies im Codelist-Repository geschehen.
        </div>

        <div>
            Ein Codelisteneintrag kann optional als Defaultwert eingestellt
            werden. Bei einem neuen Dokument wird das Feld, welches diese
            Codeliste verwendet, bereits den ausgewählten Eintrag vorausgewählt
            haben.
        </div>
    </ng-container>

    <div main-header fxLayout="column" fxLayoutAlign="center center" fxFlex>
        <ng-container
            *ngIf="(hasCatalogCodelists | async) === false; else showSelector"
        >
            <div>
                In diesem Katalog liegen keine spezifischen Codelisten vor.
            </div>
            <div>
                Alle Codelisten können über das zentrale Codelist-Repository
                verwaltet werden.
            </div>
            <div style="padding-top: 24px">
                <button
                    mat-flat-button
                    mat-stroked-button
                    (click)="resetCodelist()"
                >
                    Zurücksetzen
                </button>
            </div>
        </ng-container>

        <ng-template #showSelector>
            <mat-form-field
                appearance="outline"
                class="white-bg"
                style="flex: 1; width: 600px"
            >
                <mat-select
                    (selectionChange)="selectCodelist($event.value)"
                    [value]="initialValue"
                >
                    <mat-option
                        *ngFor="let codelist of catalogCodelists | async"
                        [value]="codelist"
                    >
                        {{ codelist.label }} ({{ codelist.value }})
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </ng-template>
    </div>

    <div
        main-content
        *ngIf="(hasCatalogCodelists | async) === true; else showLogo"
        fxFlex
    >
        <div *ngIf="selectedCodelist?.description" class="description">
            <div class="section-title">Beschreibung</div>
            <div>{{ selectedCodelist?.description }}</div>
        </div>

        <div fxLayoutAlign="end end" fxLayoutGap="12px">
            <button
                mat-flat-button
                mat-stroked-button
                (click)="resetCodelist()"
            >
                Zurücksetzen
            </button>
            <button mat-flat-button color="primary" (click)="addCodelist()">
                Hinzufügen
            </button>
        </div>

        <ige-codelist-presenter
            [codelist]="selectedCodelist"
            (edit)="editCodelist($event)"
            (remove)="removeCodelist($event)"
            (setDefault)="setAsDefault($event)"
        ></ige-codelist-presenter>
    </div>

    <ng-template #showLogo>
        <div *ngIf="!selectedCodelist" fxFlex fxLayoutAlign="center center">
            <img src="assets/icons/catalog-codelist.png" alt="codelist-repo" />
        </div>
    </ng-template>
</page-template>
