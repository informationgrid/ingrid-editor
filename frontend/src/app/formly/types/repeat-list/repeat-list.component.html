<mat-list *ngIf="field.fieldGroup.length > 0" dense>
    <mat-list-item *ngFor="let field of field.fieldGroup; let i = index;" class="clickable">

        <h3 *ngIf="to.codelistId" matLine>{{model[i] | codelist:to.codelistId | async}}</h3>
        <h3 *ngIf="!to.codelistId" matLine>{{model[i] | selectOption:to.options | async}}</h3>

        <button mat-icon-button class="close gray" (click)="removeItem(i)">
            <mat-icon svgIcon="Entfernen"></mat-icon>
        </button>

    </mat-list-item>
</mat-list>

<mat-form-field *ngIf="to.asSelect; else templateAutocomplete" appearance="outline" class="width-100">
    <mat-select [placeholder]="to.placeholder" (valueChange)="addToList($event)" [formControl]="inputControl">
        <mat-option *ngFor="let option of filteredOptions | async" [value]="option.value" [disabled]="option.disabled">
            {{option.label}}
        </mat-option>
    </mat-select>
</mat-form-field>

<ng-template #templateAutocomplete>
    <mat-form-field appearance="outline" class="width-100">
        <mat-icon *ngIf="parameterOptions && repeatListInput.value.length === 0" class="gray" matPrefix>search</mat-icon>
        <input type="text" #repeatListInput
               [placeholder]="to.placeholder"
               matInput
               [formControl]="inputControl"
               [required]="to.required && formControl.invalid"
               (keydown.enter)="addToList(repeatListInput.value)"
               [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="addToList($event.option.value)">
            <mat-option *ngFor="let option of filteredOptions | async" [value]="option.value" [disabled]="option.disabled">
                {{option.label}}
            </mat-option>
        </mat-autocomplete>
        <button *ngIf="repeatListInput.value.length > 0" mat-icon-button matSuffix class="field-close" (click)="repeatListInput.value = ''">
            <mat-icon class="gray" svgIcon="Entfernen"></mat-icon>
        </button>
        <mat-hint *ngIf="!parameterOptions">Eingabe mit RETURN best√§tigen</mat-hint>
    </mat-form-field>
    <mat-error *ngIf="formControl.errors?.required">Bitte erstellen Sie mindestens einen Eintrag</mat-error>
</ng-template>
