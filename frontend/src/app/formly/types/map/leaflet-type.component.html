<div #leaflet [class.passive]="!hasAnyLocations"></div>

<div
    *ngIf="formControl.enabled"
    class="button-wrapper text-center"
    [class.has-spatial]="hasAnyLocations"
>
    <div *ngIf="!hasAnyLocations" class="spatialBtnText">
        Erstellen Sie einen Raumbezug<span *ngIf="to.required">*</span>
    </div>
    <button
        *ngIf="!maxLocationsReached"
        type="button"
        mat-fab
        class="spatialBtn"
        data-cy="spatialButton"
        color="primary"
        (click)="openSpatialDialog()"
        [ngClass]="{
            'has-error': formControl.errors?.required
        }"
    >
        <mat-icon svgIcon="spatial-rect"></mat-icon>
    </button>
</div>

<div *ngIf="mapHasMoved" class="resetBtn">
    <button type="button" mat-flat-button (click)="highlightLocation(null)">
        Zurücksetzen
    </button>
</div>

<ige-form-error *ngIf="formControl.errors?.required"
    >Bitte erstellen Sie einen Raumbezug</ige-form-error
>

<ige-spatial-list
    *ngIf="hasAnyLocations"
    [class.list-padding]="!maxLocationsReached"
    [locations]="locationsWithColor$"
    [disabled]="formControl.disabled"
    (selectLocation)="highlightLocation($event)"
    (edit)="openSpatialDialog($event)"
    (remove)="removeLocation($event)"
></ige-spatial-list>

<div *ngIf="!disabled" class="spatialHelpText">
    Erstellen Sie Informationen über die räumliche Zuordnung des beschriebenen
    Datenbestands.
    <a *ngIf="to.hasContextHelp" (click)="showContextHelp($event)"
        >Hilfe zu Raumbezügen</a
    >
    <div *ngIf="maxLocationsReached">
        Die maximale erlaubte Anzahl an Raumbezügen ist bereits erreicht.
    </div>
</div>
