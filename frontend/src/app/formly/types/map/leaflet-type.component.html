<div *ngIf="!disabled" class="spatialHelpText">
    Erstellen Sie auf der Karte Informationen über die räumliche Zuordnung des
    beschriebenen Datenbestands. Nutzen Sie dazu den blauen „+“-Button auf der
    Karte.
    <br />
    <a *ngIf="props.hasContextHelp" (click)="showContextHelp()"
        >Hilfe zu Raumbezügen</a
    >
</div>

<div #leaflet [class.passive]="!hasAnyLocations"></div>

<div
    *ngIf="formControl.enabled"
    class="button-wrapper text-center"
    [class.has-spatial]="hasAnyLocations"
>
    <div *ngIf="!hasAnyLocations" class="spatialBtnText">
        Erstellen Sie einen Raumbezug<span *ngIf="props.required">*</span>
    </div>
    <button
        *ngIf="!maxLocationsReached"
        type="button"
        mat-fab
        class="spatialBtn"
        data-cy="spatialButton"
        color="primary"
        (click)="openSpatialDialog()"
        [ngClass]="{
            'has-error': showError && formControl.errors?.required
        }"
    >
        <mat-icon svgIcon="spatial-rect"></mat-icon>
    </button>
</div>

<div *ngIf="mapHasMoved" class="resetBtn">
    <button type="button" mat-flat-button (click)="highlightLocation(null)">
        Zurücksetzen
    </button>
</div>

<ige-form-error *ngIf="showError && formControl.errors?.required"
    >Bitte erstellen Sie einen Raumbezug
</ige-form-error>

<ige-spatial-list
    *ngIf="hasAnyLocations"
    [class.list-padding]="!maxLocationsReached"
    [locations]="locationsWithColor$"
    [disabled]="formControl.disabled"
    (selectLocation)="highlightLocation($event)"
    (edit)="openSpatialDialog($event)"
    (remove)="removeLocation($event)"
></ige-spatial-list>

<div *ngIf="maxLocationsReached" class="limitHelpText">
    <div class="limitHelpIcon">
        <mat-icon
            class="material-icons-outlined"
            svgIcon="info-24px"
        ></mat-icon>
    </div>
    <ng-container *transloco="let t">
        {{ t("spatial.limitHelpText") }}
    </ng-container>
</div>
