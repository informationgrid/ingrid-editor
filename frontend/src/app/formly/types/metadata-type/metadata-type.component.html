{{ aForm.getRawValue() | json }}

<div [attr.data-cy]="key" [formGroup]="aForm">
    @for (option of props.availableOptions; track option) {
        <div class="flex-row small-label-width">
            <ige-form-label>{{ option.label }}</ige-form-label>

            <div class="flex-row align-items-center">
                @for (typeOption of option.typeOptions; track typeOption) {
                    @if (typeOption.key === undefined) {
                        @for (
                            item of typeOption.items;
                            track item;
                            let isLast = $last
                        ) {
                            <mat-chip-listbox
                                style="flex: 0 0 auto"
                                [formControlName]="item.key"
                                ><mat-chip-option [value]="item.value">{{
                                    item.label
                                }}</mat-chip-option></mat-chip-listbox
                            >
                        }
                    } @else {
                        <mat-chip-listbox
                            [multiple]="typeOption.multiple"
                            style="flex: 0 0 auto"
                            [formControlName]="typeOption.key"
                        >
                            @for (
                                item of typeOption.items;
                                track item;
                                let isLast = $last
                            ) {
                                <mat-chip-option [value]="item.value">{{
                                    item.label
                                }}</mat-chip-option>
                                @if (!typeOption.multiple && !isLast) {
                                    <span
                                        style="
                                            line-height: 40px;
                                            padding-left: 8px;
                                        "
                                    >
                                        oder
                                    </span>
                                }
                            }
                        </mat-chip-listbox>
                    }
                }
            </div>
        </div>
    }
</div>
