{{ aForm.getRawValue() | json }}

<div [attr.data-cy]="key" [formGroup]="aForm">
    @for (option of props.availableOptions; track option) {
        <div class="flex-row small-label-width">
            <ige-form-label>{{ option.label }}</ige-form-label>

            <div class="flex-row align-items-center option-row">
                @for (typeOption of option.typeOptions; track typeOption) {
                    @if (typeOption.key === undefined) {
                        @for (
                            item of typeOption.items;
                            track item;
                            let isLast = $last
                        ) {
                            <mat-chip-listbox [formControlName]="item.key"
                                ><mat-chip-option
                                    [value]="item.value"
                                    (click)="handleOptionClick(item)"
                                    >{{ item.label }}</mat-chip-option
                                ></mat-chip-listbox
                            >
                        }
                    } @else {
                        <mat-chip-listbox
                            [multiple]="typeOption.multiple"
                            [formControlName]="typeOption.key"
                        >
                            @for (
                                item of typeOption.items;
                                track item;
                                let isLast = $last
                            ) {
                                <mat-chip-option
                                    [value]="item.value"
                                    (click)="handleOptionClick(item)"
                                    >{{ item.label }}</mat-chip-option
                                >
                                @if (!typeOption.multiple && !isLast) {
                                    <span class="connector">oder</span>
                                }
                            }
                        </mat-chip-listbox>
                    }
                }
            </div>
        </div>
    }
</div>
