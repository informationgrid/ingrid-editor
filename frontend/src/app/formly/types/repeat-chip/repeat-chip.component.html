<ige-form-error *ngIf="formControl.invalid && !formControl.hasError('required')"
    >Dieser Fehler bezieht sich auf die gesamten Einträge</ige-form-error
>

<mat-chip-listbox
    *ngIf="field.fieldGroup.length > 0"
    [disabled]="formControl.disabled"
    cdkDropList
    cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="drop($event)"
>
    <mat-chip-option
        disableRipple
        cdkDrag
        *ngFor="let field of field.fieldGroup; let i = index"
        [cdkDragDisabled]="formControl.disabled"
        [removable]="true"
        [selectable]="false"
        (removed)="remove(i)"
    >
        <mat-icon
            *ngIf="props.showLanguage"
            class="avatar gray"
            svgIcon="language-24px"
        ></mat-icon>

        <ng-container *ngIf="props.codelistId > -1; else simpleLabel">
            <div class="label">
                {{ model[i] | codelist : props.codelistId | async }}
            </div>
        </ng-container>

        <ng-template #simpleLabel
            ><div class="label">{{ model[i] }}</div></ng-template
        >

        <mat-icon *ngIf="formControl.enabled" matChipRemove>cancel</mat-icon>
    </mat-chip-option>
    <ige-add-button
        *ngIf="props.useDialog && formControl.enabled"
        [showLabel]="false"
        (add)="openDialog()"
        [showRequiredError]="
            formControl.invalid && formControl.errors?.required
        "
    ></ige-add-button>
</mat-chip-listbox>

<ige-add-button
    *ngIf="
        props.useDialog && formControl.enabled && field.fieldGroup.length === 0
    "
    class="add-button-initial"
    [showLabel]="field.fieldGroup.length === 0"
    (add)="openDialog()"
    [showRequiredError]="formControl.invalid && formControl.errors?.required"
></ige-add-button>

<ng-container *ngIf="!props.useDialog && formControl.enabled">
    <mat-form-field class="width-100" appearance="outline">
        <input
            matInput
            placeholder="Bitte eingeben..."
            autocomplete="off"
            [formControl]="inputControl"
            [required]="props.required && formControl.invalid"
            (keydown.enter)="addValues(inputControl.value)"
        />
        <button
            *ngIf="inputControl.value.length > 0"
            mat-icon-button
            matSuffix
            class="field-close"
            (click)="inputControl.setValue('')"
        >
            <mat-icon class="gray" svgIcon="Entfernen"></mat-icon>
        </button>
        <mat-hint
            >Eingabe mit RETURN bestätigen, mehrere Schlagworte durch Komma
            trennen</mat-hint
        >
        <mat-error>Bitte erstellen Sie mindestens einen Eintrag</mat-error>
    </mat-form-field>
</ng-container>
