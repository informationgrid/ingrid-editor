<ige-dialog-template
    label="Externen Datensatz wählen"
    (submit)="submit()"
    [disabled]="phase !== 'valid'"
>
    <div content>
        <mat-form-field appearance="outline" class="width-100 space-bottom">
            <mat-label>GetRecordById-URL</mat-label>
            <input
                matInput
                igeFocus
                [formControl]="urlControl"
                data-cy="get-record-url"
            />
            <mat-error>Die URL ist nicht gültig</mat-error>
        </mat-form-field>
        <ige-form-error *ngIf="analysisError">
            {{analysisError}}</ige-form-error
        >

        <div *ngIf="phase === 'analyzing'">
            <span>Die URL wird analysiert</span>
            <div class="dot-pulse"></div>
        </div>

        <div *ngIf="analysis">
            <div class="section-title">Identifier</div>
            <div class="space-bottom">{{analysis.identifier}}</div>

            <div class="section-title">Titel</div>
            <div class="space-bottom">{{analysis.title}}</div>

            <div
                *ngIf="analysis?.downloadData?.length > 0"
                class="section-title"
            >
                Downloads
            </div>
            <ul>
                <li *ngFor="let download of analysis?.downloadData">
                    {{download}}
                </li>
            </ul>
        </div>
    </div>
</ige-dialog-template>
