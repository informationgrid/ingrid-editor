<mat-list
    *ngIf="field.fieldGroup.length > 0"
    cdkDropList
    cdkDropListOrientation="vertical"
    (cdkDropListDropped)="drop($event)"
>
    <mat-list-item
        *ngFor="let field of field.fieldGroup; let i = index"
        cdkDrag
        [cdkDragDisabled]="formControl.disabled"
        class="small-padding-right"
        [class.clickable]="formControl.enabled"
        [class.draggable]="formControl.enabled"
        [class.image]="props.asImage"
    >
        <div
            *ngIf="props.asImage"
            matListItemAvatar
            class="avatar"
            [style.background-image]="'url(' + model[i].description + ')'"
        ></div>
        <div
            *ngIf="!props.asImage"
            matListItemAvatar
            class="avatar"
            [ngSwitch]="model[i]._type"
        >
            <mat-icon
                *ngSwitchCase="'internal'"
                svgIcon="download-doc"
            ></mat-icon>
            <mat-icon
                *ngSwitchCase="'external'"
                svgIcon="download-link"
            ></mat-icon>
            <div *ngSwitchCase="'download'" class="download-image">
                <mat-icon svgIcon="download-doc"></mat-icon>
                <mat-icon svgIcon="download-arrow" class="overlay"></mat-icon>
            </div>
        </div>

        <div matLine class="type">{{ model[i].type }}</div>
        <div matLine class="title">{{ model[i].title }}</div>
        <div matLine class="description">{{ model[i].description }}</div>

        <button
            *ngIf="formControl.enabled"
            mat-icon-button
            type="button"
            class="menu-button"
            [matMenuTriggerFor]="menu"
        >
            <mat-icon svgIcon="Mehr"></mat-icon>
        </button>
        <mat-menu #menu>
            <button mat-menu-item (click)="editItem(i)">Bearbeiten</button>
            <button mat-menu-item (click)="remove(i)">Entfernen</button>
        </mat-menu>

        <div *cdkDragPreview class="drag-preview"></div>
    </mat-list-item>
</mat-list>

<ige-add-button
    *ngIf="formControl.enabled"
    (add)="addItem()"
    [showRequiredError]="
        showError && formControl.invalid && formControl.errors?.required
    "
></ige-add-button>
